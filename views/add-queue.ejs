<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add to Queue - Lace and Allure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-list-ol me-2"></i>
                Lace & Allure Queue System
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="fas fa-home me-1"></i>
                            Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/queue">
                            <i class="fas fa-list me-1"></i>
                            Current Queue
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/add-queue">
                            <i class="fas fa-plus me-1"></i>
                            Add to Queue
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin">
                            <i class="fas fa-cog me-1"></i>
                            Admin
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-plus me-2"></i>
                            Add Order to Queue
                        </h4>
                    </div>
                    <div class="card-body">
                        <form id="addQueueForm">
                            <div class="mb-3">
                                <label for="productSelect" class="form-label">
                                    <i class="fas fa-box me-1"></i>
                                    Product
                                </label>
                                <select class="form-select" id="productSelect" required>
                                    <option value="">Select a product...</option>
                                    <% products.forEach(product => { %>
                                        <option value="<%= product.id %>" 
                                                data-name="<%= product.name %>" 
                                                data-sizes="<%= JSON.stringify(product.sizes) %>"
                                                data-colors="<%= JSON.stringify(product.colors || ['Black', 'White']) %>">
                                            <%= product.name %>
                                        </option>
                                    <% }); %>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="sizeSelect" class="form-label">
                                    <i class="fas fa-ruler me-1"></i>
                                    Size
                                </label>
                                <select class="form-select" id="sizeSelect" required disabled>
                                    <option value="">Select product first...</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="colorSelect" class="form-label">
                                    <i class="fas fa-palette me-1"></i>
                                    Color
                                </label>
                                <select class="form-select" id="colorSelect" required disabled>
                                    <option value="">Select product first...</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="quantity" class="form-label">
                                    <i class="fas fa-hashtag me-1"></i>
                                    Quantity
                                </label>
                                <input type="number" class="form-control" id="quantity" min="1" value="1" required>
                            </div>

                            <div class="mb-3">
                                <label for="courier" class="form-label">
                                    <i class="fas fa-truck me-1"></i>
                                    Courier/Delivery Method
                                </label>
                                <select class="form-select" id="courier" required>
                                    <option value="">Select courier...</option>
                                    <option value="Walk-in Customer">Walk-in Customer</option>
                                    <option value="SPX">SPX</option>
                                    <option value="Flash">Flash</option>
                                    <option value="J&T">J&T</option>
                                    <option value="LEX">LEX</option>
                                    <option value="Ninja Van">Ninja Van</option>
                                    <option value="Ximex">Ximex</option>
                                    <option value="JT Cargo">JT Cargo</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>

                            <div class="mb-3" id="customCourierDiv" style="display: none;">
                                <label for="customCourier" class="form-label">
                                    <i class="fas fa-edit me-1"></i>
                                    Custom Courier
                                </label>
                                <input type="text" class="form-control" id="customCourier" placeholder="Enter custom courier...">
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-plus me-2"></i>
                                    Add to Queue
                                </button>
                                <a href="/queue" class="btn btn-outline-secondary">
                                    <i class="fas fa-eye me-2"></i>
                                    View Current Queue
                                </a>
                            </div>
                        </form>
                    </div>
                </div>

                <% if (products.length === 0) { %>
                <div class="alert alert-warning mt-4" role="alert">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>No products available!</strong> 
                    Please ask an admin to add products first.
                    <a href="/admin" class="alert-link">Go to Admin Panel</a>
                </div>
                <% } %>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/add-queue.js"></script>
</body>
</html>
